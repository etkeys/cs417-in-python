
###########################################################
#     HAPPY PATHS
###########################################################

- name: happy path (1); 2x2
  setup:
    - delete_dir: '/tmp/makemat'
  input:
    args: [--from-legacy]
    data_dir: 2x2
  expect:
    returncode: 0
    matrix_size: 2
    out_dir: /tmp/makemat
    
- name: happy path (2); 10x10
  setup:
    - delete_dir: '/tmp/makemat'
  input:
    args: [--from-legacy]
    data_dir: 10x10
  expect:
    returncode: 0
    matrix_size: 10
    out_dir: /tmp/makemat

- name: happy path (3); with -d flag
  setup:
    - delete_dir: '/tmp/makemat'
    - delete_dir: '/tmp/makemat2'
  input:
    args: [--from-legacy]
    args2: [-d, /tmp/makemat2]
    data_dir: 10x10
  expect:
    returncode: 0
    matrix_size: 10
    out_dir: /tmp/makemat2
  teardown:
    - delete_dir: '/tmp/makemat2'

###########################################################
#     FAIL CONDITIONS
###########################################################

- name: bad path; no argument provided
  setup:
    - delete_dir: '/tmp/makemat'
  input:
    args: [--from-legacy]
  expect:
    returncode: 2
    matrix_size: 2
    out_dir: /tmp/makemat

- name: bad path; provided argument does not exist
  setup:
    - delete_dir: '/tmp/makemat'
  input:
    args: [--from-legacy]
    data_dir: does_not_exist
  expect:
    returncode: 1
    matrix_size: 2
    out_dir: /tmp/makemat

- name: bad path; size also given
  setup:
    - delete_dir: '/tmp/makemat'
  input:
    args: ["2", --from-legacy]
    data_dir: 2x2
  expect:
    returncode: 2
    matrix_size: 2
    out_dir: /tmp/makemat

- name: bad path; size also given (swap order)
  setup:
    - delete_dir: '/tmp/makemat'
  input:
    args: [--from-legacy]
    args2: ["2"]
    data_dir: 2x2
  expect:
    returncode: 2
    matrix_size: 2
    out_dir: /tmp/makemat